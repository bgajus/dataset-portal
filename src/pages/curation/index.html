<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Curator Review</title>

  <!-- USWDS init -->
  <script src="https://cdn.jsdelivr.net/npm/@uswds/uswds@3.13.0/dist/js/uswds-init.min.js"></script>

  <!-- USWDS + Font Awesome -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@uswds/uswds@3.13.0/dist/css/uswds.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <!-- Portal shared layer -->
  <link rel="stylesheet" href="../../assets/css/portal-tokens.css" />
  <link rel="stylesheet" href="../../assets/css/portal-ui.css" />

  <!-- Page styles -->
  <link rel="stylesheet" href="./curation.css" />
</head>

<body>
  <a class="usa-skipnav" href="#main-content">Skip to main content</a>

  <div data-include="portal-header"></div>

  <main id="main-content" class="padding-y-4">
    <div class="grid-container-widescreen">
      <nav class="usa-breadcrumb usa-breadcrumb--wrap" aria-label="Breadcrumbs">
        <ol class="usa-breadcrumb__list">
          <li class="usa-breadcrumb__list-item">
            <a class="usa-breadcrumb__link" href="/index.html"><span>Home</span></a>
          </li>
          <li class="usa-breadcrumb__list-item">
            <a class="usa-breadcrumb__link" href="/src/pages/dashboard/index.html"><span>Dashboard</span></a>
          </li>
          <li class="usa-breadcrumb__list-item usa-current" aria-current="page">
            <span>Curator Review</span>
          </li>
        </ol>
      </nav>

      <header class="cur-head margin-top-2">
        <div>
          <h1 class="margin-0">Curator Review</h1>
          <p class="text-base margin-top-1 cur-sub">
            Datasets submitted for review. Open one to edit metadata, add notes, and publish or request updates.
          </p>
        </div>

        <div class="cur-actions">
          <span class="usa-tag usa-tag--big">Role: <strong data-role-label></strong></span>
        </div>
      </header>

      <section class="margin-top-3" aria-label="Pending datasets">
        <div id="curAccessDenied" class="usa-alert usa-alert--error" hidden>
          <div class="usa-alert__body">
            <h4 class="usa-alert__heading">Curator access required</h4>
            <p class="usa-alert__text">Switch your role to Curator in Settings to use this page.</p>
          </div>
        </div>

        <div id="curEmpty" class="usa-alert usa-alert--info" hidden>
          <div class="usa-alert__body">
            <h4 class="usa-alert__heading">Nothing in review</h4>
            <p class="usa-alert__text">No datasets are currently awaiting curator review.</p>
          </div>
        </div>

        <div id="curList" class="cur-list" aria-live="polite"></div>
      </section>
    </div>

    <!-- Request Updates Modal -->
    <div id="curRequestModal" class="cur-modal" role="dialog" aria-modal="true" aria-labelledby="curRequestTitle"
      hidden>
      <div class="cur-modal__overlay" data-cur-modal-close></div>
      <div class="cur-modal__panel" role="document">
        <div class="cur-modal__head">
          <div>
            <h2 id="curRequestTitle" class="cur-modal__title margin-0">Request updates</h2>
            <p class="cur-modal__sub margin-top-05">
              This message will be added to the dataset’s request history and sent to the submitter.
            </p>
          </div>

          <button type="button" class="cur-modal__x usa-button usa-button--unstyled" aria-label="Close"
            data-cur-modal-close>
            <i class="fa-solid fa-xmark" aria-hidden="true"></i>
          </button>
        </div>

        <div class="cur-modal__body">
          <div class="cur-modal__meta">
            <div class="cur-modal__k">
              Dataset
            </div>
            <div class="cur-modal__v">
              <div id="curReqDatasetTitle" class="cur-modal__datasetTitle">—</div>
              <div id="curReqDatasetDoi" class="cur-modal__datasetDoi">—</div>
            </div>
          </div>

          <label class="usa-label margin-top-2" for="curReqMessage">
            Message to submitter <span class="text-red">*</span>
          </label>
          <span class="usa-hint">Be specific about what needs to change so the submitter can address it quickly.</span>
          <textarea id="curReqMessage" class="usa-textarea" rows="6"
            placeholder="Example: Please add funding information and clarify the dataset description. Also confirm the subject classification."
            required></textarea>
          <div id="curReqError" class="usa-error-message margin-top-1" hidden></div>

          <fieldset class="usa-fieldset margin-top-3">
            <legend class="usa-legend">Optional flags</legend>
            <div class="usa-checkbox">
              <input class="usa-checkbox__input" id="flagMeta" type="checkbox" value="Metadata incomplete" />
              <label class="usa-checkbox__label" for="flagMeta">Metadata incomplete</label>
            </div>
            <div class="usa-checkbox">
              <input class="usa-checkbox__input" id="flagFiles" type="checkbox" value="Files missing or unclear" />
              <label class="usa-checkbox__label" for="flagFiles">Files missing or unclear</label>
            </div>
            <div class="usa-checkbox">
              <input class="usa-checkbox__input" id="flagSubject" type="checkbox"
                value="Subject classification needs review" />
              <label class="usa-checkbox__label" for="flagSubject">Subject classification needs review</label>
            </div>
            <div class="usa-checkbox">
              <input class="usa-checkbox__input" id="flagOther" type="checkbox" value="Other" />
              <label class="usa-checkbox__label" for="flagOther">Other</label>
            </div>
          </fieldset>
        </div>

        <div class="cur-modal__foot">
          <button type="button" class="usa-button usa-button--outline btnBrandOutline" data-cur-modal-close>
            Cancel
          </button>
          <button id="curReqSend" type="button" class="usa-button btnBrandSolid">
            Send back for updates
          </button>
        </div>
      </div>
    </div>

    <!-- Request History Modal -->
    <div id="curHistoryModal" class="cur-modal" role="dialog" aria-modal="true" aria-labelledby="curHistoryTitle"
      hidden>
      <div class="cur-modal__overlay" data-cur-modal-close></div>
      <div class="cur-modal__panel cur-modal__panel--wide" role="document">
        <div class="cur-modal__head">
          <div>
            <h2 id="curHistoryTitle" class="cur-modal__title margin-0">Request history</h2>
            <p class="cur-modal__sub margin-top-05">
              All curator “Request updates” notes for this dataset (newest first).
            </p>
          </div>

          <button type="button" class="cur-modal__x usa-button usa-button--unstyled" aria-label="Close"
            data-cur-modal-close>
            <i class="fa-solid fa-xmark" aria-hidden="true"></i>
          </button>
        </div>

        <div class="cur-modal__body">
          <div class="cur-modal__meta">
            <div class="cur-modal__k">Dataset</div>
            <div class="cur-modal__v">
              <div id="curHistDatasetTitle" class="cur-modal__datasetTitle">—</div>
              <div id="curHistDatasetDoi" class="cur-modal__datasetDoi">—</div>
            </div>
          </div>

          <div id="curHistEmpty" class="usa-alert usa-alert--info margin-top-3" hidden>
            <div class="usa-alert__body">
              <h4 class="usa-alert__heading">No request history</h4>
              <p class="usa-alert__text">No update requests have been sent for this dataset yet.</p>
            </div>
          </div>

          <div id="curHistList" class="cur-hist margin-top-3" aria-live="polite"></div>
        </div>

        <div class="cur-modal__foot">
          <button type="button" class="usa-button btnBrandSolid" data-cur-modal-close>
            Close
          </button>
        </div>
      </div>
    </div>
  </main>

  <div data-include="portal-footer"></div>

  <!-- USWDS JS -->
  <script src="https://cdn.jsdelivr.net/npm/@uswds/uswds@3.13.0/dist/js/uswds.min.js"></script>

  <!-- Shared includes loader -->
  <script type="module" src="../../assets/js/includes.js"></script>

  <!-- Page JS -->
  <script type="module" src="./curation.js"></script>
</body>

</html>