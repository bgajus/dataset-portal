.topSearch .usa-input{ max-width: none; width: 100%; }
.topSearch .usa-select{ max-width: none; }

/* Search pill */
.searchPill{
  display: flex;
  align-items: center;
  gap: .6rem;
  width: 100%;
  border: 1px solid var(--borderSoft);
  border-radius: 999px;
  background: #fff;
  padding: .35rem .55rem; /* slightly tighter to accommodate clear + button */
}

/* Disable browser-native "X" on type=search so we control it consistently */
.searchInput::-webkit-search-cancel-button,
.searchInput::-webkit-search-decoration{
  -webkit-appearance: none;
}

/* (No longer used in the new markup, but harmless to keep) */
.searchIcon{ color: var(--brand); font-size: 1rem; display: inline-flex; align-items: center; }

.searchClear[hidden]{ display:none !important; }

/* Clear X (light gray, darkens on hover) */
.searchClear{
  border: 0;
  background: transparent;
  cursor: pointer;
  color: #a8a8a8;
  display: inline-flex;
  align-items: center;
  justify-content: center;

  width: 2.35rem;
  height: 2.35rem;
  border-radius: 999px;
  padding: 0;
}
.searchClear:hover{
  color: #6f6f6f;
  background: rgba(0,0,0,0.04);
}
.searchClear:focus-visible{
  outline: none;
  box-shadow: 0 0 0 .25rem var(--brandFocus);
}

/* Search input */
.searchInput.usa-input{
  border: 0;
  padding: .45rem 0;
  box-shadow: none;
  background: transparent;
}
.searchInput.usa-input:focus{ outline: none; }

.searchPill:focus-within{
  border-color: var(--brand);
  box-shadow: 0 0 0 .25rem var(--brandFocus);
}

/* NEW: right-side magnifier "button" */
.searchGo{
  border: 0;
  cursor: pointer;
  background: var(--brand);
  color: #fff;

  width: 2.35rem;
  height: 2.35rem;
  border-radius: 999px;

  display: inline-flex;
  align-items: center;
  justify-content: center;

  box-shadow: 0 1px 0 rgba(0,0,0,.03);
  transition: filter .15s ease;
}
.searchGo:hover{ filter: brightness(.95); }
.searchGo:focus-visible{
  outline: none;
  box-shadow: 0 0 0 .25rem var(--brandFocus);
}

/* Sort pill */
.sortPill{
  display: inline-flex; align-items: center; gap: .5rem;
  border: 1px solid var(--borderSoft);
  border-radius: .75rem;
  background: #fff;
  padding: .15rem .55rem;
  box-shadow: 0 1px 0 rgba(0,0,0,.03);
}
.sortIcon{ color: var(--textMuted); display: inline-flex; align-items: center; font-size: 1rem; }
.sortSelect.usa-select{
  border: 0;
  padding: .45rem 2rem .45rem .15rem;
  margin: 0;
  background-color: transparent;
  box-shadow: none;
  min-width: 12.5rem;
}
.sortSelect.usa-select:focus{ outline: none; }
.sortPill:focus-within{ border-color: var(--brand); box-shadow: 0 0 0 .25rem var(--brandFocus); }

.mobileOnly{ display: none; }
.desktopOnly{ display: block; }
@media (max-width: 1023px){
  .mobileOnly{ display: inline-flex; }
  .desktopOnly{ display: none; }
}

/* Sticky sidebar */
.sidebar-sticky{ position: sticky; top: 1rem; }
/* natural height (not stretched to 100%) */
.sidebarNaturalHeight{ align-self: flex-start; height: auto; }

.filterSection{ padding-bottom: 1rem; margin-bottom: 1rem; border-bottom: 1px solid var(--borderSoft); }
.filterSection--last{ border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
.filterHeader{
  width: 100%; border: 0; background: transparent; padding: 0;
  display: flex; align-items: center; justify-content: space-between; gap: .75rem; cursor: pointer;
}
.filterTitle{ font-size: .95rem; font-weight: 800; margin: 0; }
.chev{ color: var(--textMuted); transition: transform .15s ease; }
.filterSection.is-collapsed .chev{ transform: rotate(-90deg); }
.filterBody{ margin-top: .6rem; }
.filterSection.is-collapsed .filterBody{ display: none; }

/* Facet "See more/less" behavior (JS toggles .facetHidden) */
.facetHidden{ display: none !important; }

.facetToggleWrap{
  margin-top: .25rem;
}
.facetToggle.usa-button--unstyled{
  color: var(--brand);
  font-weight: 800;
  font-size: .9rem;
  text-decoration: none;
}
.facetToggle.usa-button--unstyled:hover{
  text-decoration: underline;
}
.facetToggle.usa-button--unstyled:focus-visible{
  outline: none;
  box-shadow: 0 0 0 .25rem var(--brandFocus);
  border-radius: .5rem;
}

/* Checkbox theme */
.usa-checkbox__input + .usa-checkbox__label::before{
  border: 1px solid var(--borderSoft);
  border-radius: .25rem;
  box-shadow: none;
}
.usa-checkbox__input:checked + .usa-checkbox__label::before{
  background-color: var(--brand);
  border-color: var(--brand);
}
.usa-checkbox__input:focus + .usa-checkbox__label::before{
  outline: none;
  box-shadow: 0 0 0 .25rem var(--brandFocus);
  border-color: var(--brand);
}
.usa-checkbox__label:hover::before{ border-color: #c9c9c9; }

/* Chips */
.chipRow{ display: flex; flex-wrap: wrap; gap: .5rem; }
.chip{
  display: inline-flex; align-items: center; gap: .35rem;
  padding: .35rem .6rem;
  border: 1px solid var(--borderSoft);
  border-radius: 999px;
  background: #f8f8f8;
  font-weight: 700; font-size: .9rem; line-height: 1;
}
.chip button{
  border: 0; background: transparent; cursor: pointer;
  font-weight: 900; font-size: 1rem; line-height: 1; padding: 0 .1rem;
}
.chip button:focus-visible{ outline: none; box-shadow: 0 0 0 .25rem var(--brandFocus); border-radius: 999px; }

/* Results */
.resultsStack{ display: grid; gap: 1rem; }
.resultCard{
  background: #fff;
  border: 1px solid var(--borderSoft);
  border-radius: .75rem;
  padding: 1rem;
  box-shadow: 0 1px 0 rgba(0,0,0,.03);
}
.resultGrid{
  display: grid;
  grid-template-columns: minmax(0, 1.6fr) minmax(0, .7fr) minmax(0, .7fr) minmax(0, .55fr) auto;
  gap: 1rem;
  align-items: start;
}
@media (max-width: 1100px){
  .resultGrid{ grid-template-columns: 1fr; }
  .resultActions{ margin-top: .75rem; justify-content: flex-start; }
}
.resultTitle{ font-weight: 800; margin: 0; line-height: 1.25; }
.resultDoi{
  margin-top: .25rem;
  font-size: .95rem;
  font-weight: 700;
  overflow-wrap: anywhere;
}

a.usa-link{ color: var(--brand); }
.metaLabel{ font-size: .85rem; color: var(--textMuted); margin-bottom: .25rem; }
.metaValue{ font-weight: 700; overflow-wrap: anywhere; }

.resultActions{ display: flex; gap: .5rem; justify-content: flex-end; }
.iconBtn{
  border: 1px solid var(--borderSoft);
  background: #fff;
  border-radius: .6rem;
  width: 2.5rem; height: 2.5rem;
  cursor: pointer;
  font-size: 1.1rem; line-height: 1;
  color: var(--brand);
}
.iconBtn:hover{ border-color: #c9c9c9; }
.iconBtn:focus-visible{ outline: none; box-shadow: 0 0 0 .25rem var(--brandFocus); border-color: var(--brand); }

/* Contributors summary */
.contribSummary{
  display: flex; flex-wrap: wrap; gap: .25rem .35rem;
  align-items: center; line-height: 1.35; max-width: 100%;
  margin-top: .5rem;
}
.contribSummary .sep{ color: var(--textMuted); }
.contribSummary .name{ white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 18rem; }
.morePill{
  border: 1px solid var(--borderSoft);
  border-radius: 999px;
  padding: .15rem .55rem;
  font-weight: 700;
  cursor: pointer;
  background: #fff;
  color: var(--brand);
}
.morePill:hover{ border-color: #c9c9c9; }
.morePill:focus-visible{ outline: none; box-shadow: 0 0 0 .25rem var(--brandFocus); border-color: var(--brand); }

/* Popover */
.contrib-backdrop{
  position: fixed; inset: 0;
  background: rgba(0,0,0,.28);
  backdrop-filter: blur(1px);
  z-index: 40;
}
.contrib-popover{
  position: fixed; z-index: 50;
  width: min(520px, 94vw);
  max-height: min(560px, 86vh);
  background: #fff;
  border: 1px solid var(--borderSoft);
  border-radius: .75rem;
  box-shadow: 0 20px 60px rgba(0,0,0,.22);
  padding: 1rem;
}
.contrib-list{
  border: 1px solid var(--borderSoft);
  border-radius: .75rem;
  padding: .5rem;
  background: #f8f8f8;
  max-height: 320px;
  overflow: auto;
  display: grid;
  gap: .5rem;
}
.contrib-row{
  background: #fff;
  border: 1px solid var(--borderSoft);
  border-radius: .75rem;
  padding: .6rem .75rem;
  display: grid;
  gap: .15rem;
}
.contrib-row .nm{ font-weight: 700; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.contrib-row .aff{ color: var(--textMuted); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

/* Mobile drawer */
.drawer-backdrop{
  position: fixed; inset: 0;
  background: rgba(0,0,0,.28);
  backdrop-filter: blur(1px);
  z-index: 60;
}
.filter-drawer{
  position: fixed; top: 0; right: 0;
  height: 100vh;
  width: min(420px, 92vw);
  background: #fff;
  border-left: 1px solid var(--borderSoft);
  box-shadow: -20px 0 60px rgba(0,0,0,.20);
  z-index: 70;
  overflow: auto;
}

/* Pagination row */
.pagingRow{
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  gap: 1rem;
  padding: .25rem 0;
  background: transparent;
}
.pagerInline{
  grid-column: 2;
  justify-self: center;
  margin: 0;
}
.pagerInline .usa-pagination__list{ margin: 0; }

.perPageGroup{
  grid-column: 3;
  justify-self: end;
  display: inline-flex;
  align-items: center;
  gap: .5rem;
  color: var(--textMuted);
  font-weight: 700;
  font-size: .9rem;
}
.perPageLabel{ white-space: nowrap; }

.perPageSelectMini.usa-select{
  width: 4.25rem;
  max-width: none;
  padding: .35rem 1.9rem .35rem .55rem;
  border: 1px solid var(--borderSoft);
  border-radius: .6rem;
  box-shadow: 0 1px 0 rgba(0,0,0,.03);
  background-color: #fff;
}
.perPageSelectMini.usa-select:focus{
  outline: none;
  border-color: var(--brand);
  box-shadow: 0 0 0 .25rem var(--brandFocus);
}

@media (max-width: 640px){
  .pagingRow{
    grid-template-columns: 1fr;
    justify-items: center;
  }
  .pagerInline{ grid-column: 1; }
  .perPageGroup{ grid-column: 1; justify-self: center; }
}
